<!DOCTYPE html>
<html class="no-js">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>jQuery.skedTape</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel=" stylesheet" href="jquery.skedTape.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="//stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/solid.css"
        integrity="sha384-wnAC7ln+XN0UKdcPvJvtqIH3jOjs9pnKnq9qX68ImXvOGz2JuFoEiCjT8jyZQX2z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css"
        integrity="sha384-HbmWTHay9psM8qyzEKPc8odH4DsOuzdejtnr+OFtDmOcIVnhgReQ4GZBH7uwcjf6" crossorigin="anonymous">
    <script src="jquery.skedTape.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.13.0/Sortable.min.js"></script>


    <style>
        .containerr {
            width: 80%;
        margin: 0 auto;
        background-color: #0C1B38;
        height: 170px;
        border-radius: 10px;
        /* overflow-x: auto; */
        /* white-space: nowrap; */
        }

        /* .card {
            margin: 1rem;
        } */

        /* .flex-row.flex-nowrap {
            overflow-x: auto;
        } */

        /* .flex-row>div[class*='col-'] {
            display: flex;
            flex: 1 0 auto;
        } */

        .card-block {
            display: inline-block;
        width: 160px;
        height: 85px;
        border-radius: 12px;
        background-color: #a1aabb;
        border: 1px solid #0446c2;
        /* margin: 10px 15px -76px; */
        cursor: move;
        font-size: 0.8em;
        color: white;
        /* padding: 5px; */
        }
    </style>

</head>

<body>
    <br>
    <br>
    <div class="containerr">
        <div id="carousel" class="row d-flex flex-row flex-nowrap overflow-auto">
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <div class="col-4 draggable" draggable="true">
                <div class="card card-block">Item 1</div>
            </div>
            <!-- Adicione mais colunas conforme necessário -->
        </div>
    </div>


    <div class="container mt-4">

        <div class="mb-4">

            <div class="mb-2" id="sked1"></div>

        </div>

    </div>

    <script type="text/javascript">

var el = document.getElementById('carousel');
var selectedId = null;

// Adicionando listener de eventos aos elementos do carrossel.
el.addEventListener('click', function (event) {
    // Suponho que o ID do elemento está armazenado no atributo data-id.
    selectedId = 5
});


        var locations = [
            { id: '1', name: 'San Francisco', tzOffset: 7 * 60 },
            { id: '2', name: 'Sydney', tzOffset: -10 * 60 },
            { id: '3', name: 'New York', tzOffset: 4 * 60 },
            { id: 'london', name: 'London', tzOffset: -1 * 60 },
            { id: '5', name: 'Copenhagen', tzOffset: -2 * 60 },
            { id: '6', name: 'Berlin', tzOffset: -2 * 60 },


        ];
        var events = [
            {
                name: 'Meeting 1',
                location: 'london',
                start: today(4, 15),
                end: today(7, 30)
            },
            {
                name: 'Meeting 2 (ovelapping)',
                location: 'london',
                start: today(6, 30),
                end: today(9, 15)
            },

        ];

        function today(hours, minutes) {
            var date = new Date();
            date.setHours(hours, minutes, 0, 0);
            return date;
        }
        function yesterday(hours, minutes) {
            var date = today(hours, minutes);
            date.setTime(date.getTime() - 24 * 60 * 60 * 1000);
            return date;
        }
        function tomorrow(hours, minutes) {
            var date = today(hours, minutes);
            date.setTime(date.getTime() + 24 * 60 * 60 * 1000);
            return date;
        }

        var $sked1 = $('#sked1').skedTape({
            caption: 'Técnicos',
            start: today(8, 0),
            end: today(24, 0),
            showEventTime: true,
            showEventDuration: true,
            scrollWithYWheel: true,
            locations: locations.slice(),
            events: events.slice(),
            maxTimeGapHi: 60 * 1000, // 1 minute
            minGapTimeBetween: 1 * 60 * 1000,
            snapToMins: 1,
            editMode: true,
            timeIndicatorSerifs: true,
            showIntermission: true,
            formatters: {
                date: function (date) {
                    return $.fn.skedTape.format.date(date, 'l', '.');
                },
                duration: function (ms, opts) {
                    return $.fn.skedTape.format.duration(ms, {
                        hrs: 'ч.',
                        min: 'мин.'
                    });
                },
            },
            canAddIntoLocation: function (location, event) {
                return location.id !== 'london';
            },
            postRenderLocation: function ($el, location, canAdd) {
                this.constructor.prototype.postRenderLocation($el, location, canAdd);
                $el.prepend('<i class="fas fa-thumbtack text-muted"/> ');
            }
        });
        $sked1.on('event:dragEnded.skedtape', function (e) {
            console.log(e.detail.event);
        });
        $sked1.on('event:click.skedtape', function (e) {
            $sked1.skedTape('removeEvent', e.detail.event.id);
        });
        $sked1.on('timeline:click.skedtape', function (e, api) {
            try {
                if (selectedId) {
            $sked1.skedTape('startAdding', {
                name: 'New meeting' + selectedId,
                id: selectedId,  // Use o ID armazenado aqui.
                duration: 60 * 60 * 1000
            });
            selectedId = null; // Resetar o ID armazenado.
        }
            }
            catch (e) {
                if (e.name !== 'SkedTape.CollisionError') throw e;
                alert('Already exists');
            }
        });

        $(document).ready(function() {
    $(".draggable").on("dragstart", function(event) {
        event.originalEvent.dataTransfer.setData("text", $(this).text());
    });

    $("#sked1").on("dragover", function(event) {
        event.preventDefault();
    });

    $("#sked1").on("drop", function(event) {
        event.preventDefault();
        var name = event.originalEvent.dataTransfer.getData("text");
        var newEvent = {
            name: name,
            location: 'Berlin', // Esta localização é apenas um exemplo, ajuste de acordo com suas necessidades
            start: new Date(), // Este é um horário de início genérico, ajuste de acordo com suas necessidades
            end: new Date().setHours(new Date().getHours() + 1) // Adicionando uma hora ao horário atual
        };
        $sked1.skedTape('addEvent', newEvent);
    });
});

    </script>
</body>

</html>